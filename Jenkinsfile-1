pipeline {
  agent { dockerfile true }
  stages {
    stage('Version Check') {
      steps {
        sh '''
          usermod -a -G docker jenkins
          python3 -m venv venv
          . venv/bin/activate
          export ANSIBLE_TMPDIR="/tmp/ansible_tmp"
          python3 --version
          pip --version
          pip install ansible junit_xml pymongo xmljson jmespath kubernetes==12.0.1 openshift==0.12.1
          ansible --version
        '''
      }
    }
  }
}
